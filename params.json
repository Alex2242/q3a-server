{
  "name": "Q3a-server",
  "tagline": "A guide for creating a Quake III Arena dedicated server",
  "body": "Installing a Quake III Arena dedicated server\r\n=============================================\r\n\r\nThis is a guide for setting up a dedicated Q3A server on Linux. It is mostly\r\ndistribution-agnostic so it will work on almost any Linux flavor with little or\r\nno modification. The required software is available for many hardware platforms,\r\nso you can very quickly setup your own server on almost any kind of computer. A\r\nRaspberry Pi 2 or 3 makes an excellent Q3A server!\r\n\r\nThis server will run a specific game type and cycle through maps automatically.\r\nIf you leave the server running with bots, they will continue to battle it out\r\nwhile you are not connected! This guide has only been tested for the original\r\nQ3A, but I imagine that similar steps and configuration files could be used for\r\nother games that use this engine.\r\n\r\nYou can read more about this on the [official ioquake3 documentation]\r\n(http://wiki.ioquake3.org/Sys_Admin_Guide).\r\n\r\nYou will need:\r\n\r\n* Original `.pk3` files from the game CD or digital download,\r\n* `ioquake3-server`, a [modern implementation](http://ioquake3.org) \r\n    of the Q3A engine,\r\n* any modern Linux distribution, I use Debian Jessie here.\r\n\r\n\r\nInstallation\r\n---------------------------------------------\r\n\r\nI suggest creating a user with restricted privileges for running the Q3A server.\r\nThis makes it easier to manage the server. As `root`,\r\n\r\n```sh\r\nuseradd -m -g users -s /bin/bash -d /home/quake3 quake3 # create quake3 user\r\npasswd quake3 # change quake3's password\r\n```\r\n\r\nInstall the `ioquake3-server` package by running\r\n\r\n```sh\r\napt-get install ioquake3-server # install the Q3A server\r\n```\r\n\r\nSwitch over to the newly created `quake3` user. The Q3A server installed at\r\n`/usr/lib/ioquake3/ioq3ded`, and running it should produce the following:\r\n\r\n```\r\n$ /usr/lib/ioquake3/ioq3ded\r\n\r\nioq3 1.36+u20140802+gca9eebb-2+b1/Debian linux-x86_64 Oct 14 2014\r\nHave SSE support\r\n----- FS_Startup -----\r\nCurrent search path:\r\n/home/quake3/.q3a/baseq3\r\n/usr/lib/ioquake3/baseq3\r\n\r\n----------------------\r\n0 files in pk3 files\r\n\"pak0.pk3\" is missing. Please copy it from your legitimate Q3 CDROM. Point\r\nRelease files are missing. Please re-install the 1.32 point release. Also check\r\nthat your ioq3 executable is in the correct place and that every file in the\r\n\"baseq3\" directory is present and readable\r\n```\r\n\r\nWe are missing the `.pk3` files from our Q3A CD or digital download.\r\n\r\nRunning the server produces a `.q3a` directory in the home directory. Copy your\r\nQ3A files from the `baseq3` directory here. You can also copy the Quake III:\r\nTeam Arena files by copying the `missionpack/` directory alongside `baseq3/`,\r\nalthough this is optional for a dedicated server. You should end up with this:\r\n\r\n```\r\n.q3a/\r\n├── baseq3\r\n│   ├── pak0.pk3\r\n│   ├── pak1.pk3\r\n│   ├── pak2.pk3\r\n│   ├── pak3.pk3\r\n│   ├── pak4.pk3\r\n│   ├── pak5.pk3\r\n│   ├── pak6.pk3\r\n│   ├── pak7.pk3\r\n│   └── pak8.pk3\r\n└── missionpack\r\n    ├── pak0.pk3\r\n    ├── pak1.pk3\r\n    ├── pak2.pk3\r\n    └── pak3.pk3\r\n```\r\n\r\nThe server now has everything it needs to run correctly. You can start it up\r\nagain with `/usr/lib/ioquake3/ioq3ded`, and kill it with `ctrl + c`. Now we just\r\nneed to configure and automate it a bit.\r\n\r\n\r\nConfiguration\r\n---------------------------------------------\r\n\r\nThe server can be configured using `.cfg` files. Typically the only one that is\r\nrequired is `autoexec.cfg`. However, it is very practical to divide the options\r\nbetween different files in order to better manage your server. Here I have\r\ndivided the options between 4 files each with different functions.\r\n\r\n1. `autoexec.cfg` controls the most basic aspects of the server,\r\n2. `server.cfg` defines the gametype and most game options,\r\n3. `bots.cfg` allows for easy setup of the bots playing on the server, and\r\n4. `levels.cfg` sets up the maps to be played, their order, and rotation.\r\n\r\nI'll list each file here, and they are also included with this guide.\r\n\r\n```c\r\n$ cat autoexec.cfg\r\n\r\nset vm_game 2           // I have no idea what this shit is\r\nset vm_cgame 2          // Nope\r\nset vm_ui 2             // Nada\r\nset dedicated 1         // Dedicated server but not announced\r\nset com_hunkmegs 128    // How much RAM for your server\r\nset net_port 27960      // The network port\r\n```\r\n\r\n```c\r\n$ cat server.cfg\r\n\r\n// general server info\r\nseta sv_hostname \"Q3A CTF\"      // name that appears in server list\r\nseta g_motd \"Hard CTF 24/7\"     // message that appears when connecting\r\nseta sv_maxclients 16           // max number of clients than can connect\r\nseta sv_pure 1                  // pure server, no altered pak files\r\nseta g_quadfactor 4             // quad damage strength (3 is normal)\r\nseta g_friendlyFire 1           // friendly fire motherfucker\r\n\r\n// capture the flag\r\nseta g_gametype 4               // 0:FFA, 1:Tourney, 2:FFA, 3:TD, 4:CTF\r\nseta g_teamAutoJoin 0           // 0:goes into spectator mode, 1:auto joins a team \r\nseta g_teamForceBalance 0       // 0:free selection, 1:forces player on weak team\r\nseta timelimit 30               // Time limit in minutes\r\nseta capturelimit 8             // Capture limit for CTF\r\nseta fraglimit 0                // Frag limit\r\n\r\n// team deathmatch\r\n//seta g_gametype 3             // 0:FFA, 1:Tourney, 2:FFA, 3:TD, 4:CTF\r\n//seta g_teamAutoJoin 0         // 0:goes into spectator mode, 1:auto joins a team\r\n//seta g_teamForceBalance 1     // 0:free selection, 1:forces player on weak team\r\n//seta timelimit 15             // Time limit in minutes\r\n//seta fraglimit 25             // Frag limit\r\n\r\n// free for all\r\n//seta g_gametype 0             // 0:FFA, 1:Tourney, 2:FFA, 3:TD, 4:CTF\r\n//seta timelimit 10             // Time limit in minutes\r\n//seta fraglimit 15             // Frag limit\r\n\r\nseta g_weaponrespawn 2          // weapon respawn in seconds \r\nseta g_inactivity 120           // kick players after being inactive for x seconds\r\nseta g_forcerespawn 0           // player has to press primary button to respawn\r\nseta g_log server.log           // log name\r\nseta logfile 3                  // probably some kind of log verbosity?   \r\nseta rconpassword \"secret\"      // sets RCON password for remote console\r\n\r\nseta rate \"12400\"               // not sure\r\nseta snaps \"40\"                 // what this\r\nseta cl_maxpackets \"40\"         // stuff is\r\nseta cl_packetdup \"1\"           // all about\r\n```\r\n\r\n```c\r\n$ cat bots.cfg\r\n\r\nseta bot_enable 1       // Allow bots on the server\r\nseta bot_nochat 1       // Shut those fucking bots up\r\nseta g_spskill 4        // Default skill of bots [1-5] \r\nseta bot_minplayers 5   // This fills the server with bots to satisfy the minimum\r\n\r\n//## Manual adding of bots. syntax:\r\n//## addbot name [skill] [team] [delay]\r\n//addbot doom       4   blue    10\r\n//addbot bones      4   blue    10\r\n//addbot slash      4   blue    10\r\n//addbot orbb       4   red     10\r\n//addbot major      4   red     10\r\n//addbot hunter     4   red     10\r\n//addbot bitterman  4   red     10\r\n//addbot keel       4   red     10\r\n```\r\n\r\n```c\r\n$ cat levels.cfg\r\n\r\nset dm1 \"map q3ctf4; set nextmap vstr dm2\"\r\nset dm2 \"map q3ctf3; set nextmap vstr dm3\"\r\nset dm3 \"map q3ctf2; set nextmap vstr dm4\"\r\nset dm4 \"map q3ctf1; set nextmap vstr dm1\"\r\nvstr dm1\r\n```\r\n\r\nThese files need to be placed in the `.q3a/baseq3/` directory.\r\n\r\n\r\nRunning your Q3A server\r\n---------------------------------------------\r\n\r\nYou can start your server using these config files by running\r\n\r\n```sh\r\n/usr/lib/ioquake3/ioq3ded +exec server.cfg +exec levels.cfg +exec bots.cfg\r\n```\r\n\r\nIt is possible to run the server in the background or even autostarting it after\r\nbooting in to the system. However, in this guide I suggest running it manually\r\nwith the `quake3` user, inside of a GNU Screen session. This makes it very easy\r\nto access and monitor. Additionally, the server binary is very verbose and\r\ndetails everything that is occurring in-game. This can be especially amusing\r\nwhen you have bots fighting even when you are not connected.\r\n\r\nI have created a simple script that loads the configuration files and starts the\r\nserver automatically. Remember, the files need to be placed in the\r\n`.q3a/baseq3/` directory for the program to see them. You can place the\r\nfollowing script directly into the home directory of the `quake3` user:\r\n\r\n```sh\r\n$ cat q3start.sh\r\n\r\n#!/bin/bash\r\n# quick starting a quake 3 dedicated server\r\n/usr/lib/ioquake3/ioq3ded +exec server.cfg +exec levels.cfg +exec bots.cfg\r\n```\r\n\r\nIn summary, you should\r\n\r\n1. log on to the computer,\r\n2. start a Screen session with `screen -D -R`,\r\n3. switch to the `quake3` user with `su - quake3`,\r\n4. execute the server with `./q3start.sh`, and\r\n5. enjoy!\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}